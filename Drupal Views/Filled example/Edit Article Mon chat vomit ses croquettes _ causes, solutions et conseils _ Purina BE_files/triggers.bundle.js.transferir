(()=>{if(void 0===window.dataLayer)return;document.addEventListener("DOMContentLoaded",(()=>{window.isZoneLoaded=!1,window.dataLayer=window.dataLayer||[];var e;(e="zone_loaded",window.dataLayer.find((t=>t.event===e)))&&(window.isZoneLoaded=!0);const t=window.dataLayer.push;window.dataLayer.push=function(){Array.from(arguments).forEach((e=>{if(!e||"object"!=typeof e||!e.hasOwnProperty("event")||!e.event)return;let n=e?.event;if("zone_loaded"===n&&!window.isZoneLoaded)return window.isZoneLoaded=!0,t.apply(window.dataLayer,[e]),void window.dispatchEvent(new CustomEvent("zoneload",{detail:{isZoneLoaded:!0}}));if("custom_event"!==n||window.isZoneLoaded){if("buynow_onsite_button_click"===n){const t=drupalSettings?.nppe_ttt_datalayer?.baseline?.site_content;e.website_section=t?.website_section||"undefined"}t.apply(window.dataLayer,[e])}else window.addEventListener("zoneload",(function(){t.apply(window.dataLayer,[e])}))}))}}));const e=(e,t,n,a,o=null,d=!1)=>{const r=()=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener(a,(e=>{const a=()=>{document.dispatchEvent(new CustomEvent(n,{detail:{el:e.target,dl_event:t}}))};if(o){if(document.querySelector(o))a();else{new MutationObserver(((e,t)=>{document.querySelector(o)&&(t.disconnect(),a())})).observe(document.body,{childList:!0,subtree:!0})}}else a()}))}))};if(d){if(document.querySelectorAll(e).length)r();else{new MutationObserver(((t,n)=>{document.querySelectorAll(e).length&&(n.disconnect(),r())})).observe(document.body,{childList:!0,subtree:!0})}}else r()},t=e=>{document.querySelectorAll(e._context_).forEach((t=>{t.querySelectorAll(e._trigger_).forEach((t=>{t.hasAttribute("data-datalayer-bound")||(t.setAttribute("data-datalayer-bound","true"),t.addEventListener(e._eventTrigger_,(t=>{const n=e.data;document.dispatchEvent(new CustomEvent("clickEvents",{detail:{el:t.target,eventData:n}}))})))}))}))},n=()=>{const e=window.drupalSettings?.nppe_ttt_datalayer?.init||[],n=window.drupalSettings?.nppe_ttt_datalayer?.events||[],a=[...Array.isArray(e)?e:Object.values(e),...Array.isArray(n)?n:Object.values(n)];a&&a.forEach((e=>{e.data&&e.data.event_name&&t(e)}))};window.rebindContribTriggers=n;const a=Object.values(window?.drupalSettings?.nppe_ttt_datalayer?.triggers||{});a&&a.forEach((t=>{if(t.trigger_type&&t.event_name)switch(t.trigger_type){case"click":e(t.selector,t.event_name,"clickEvents","click",t?.wait_for_selector);break;case"keyUp":e(t.selector,t.event_name,"keyupEvents","keyup");break;case"mouseDown":e(t.selector,t.event_name,"mouseDownEvents","mousedown",t?.wait_for_selector,!0);break;case"form":const n=t.selector.replace("_","-"),a=document.querySelector(`[id^="${n}"], [class^="${n}"]`);a&&(e=>{e.addEventListener("submit",(t=>{document.dispatchEvent(new CustomEvent("submitFormEvents",{detail:{form:e,originalEvent:t}}))}))})(a);break;case"appear":((e,t,n)=>{const a=document.querySelector(e);a?a.addEventListener(n,(()=>{document.dispatchEvent(new CustomEvent("appearElementEvents",{detail:{dl_event_name:t}}))})):new MutationObserver(((a,o)=>{const d=document.querySelector(e);d&&(d.addEventListener(n,(()=>{document.dispatchEvent(new CustomEvent("appearElementEvents",{detail:{dl_event_name:t}}))})),o.disconnect())})).observe(document.body,{childList:!0,subtree:!0})})(t.selector,t.event_name,"shown.bs.modal")}})),Drupal.AjaxCommands.prototype.pushToDataLayer=(e,t)=>{document.dispatchEvent(new CustomEvent("ajaxFormEvents",{detail:{ajax:e,response:t}}))};const o=new Set;new MutationObserver((()=>{const e=window.drupalSettings?.nppe_ttt_datalayer?.after_zone_loaded||{};Object.entries(e).forEach((([e,t])=>{if(o.has(e))return;if("registration_submit"===t?.event_name){const t=e.slice(11);if(!(n=t)||(n=n.toLowerCase(),!document.querySelector(`form[id*="${n}" i],form[class*="${n}" i],form[name*="${n}" i]`)))return}var n;o.add(e);const a=()=>{var n;n=t,document.dispatchEvent(new CustomEvent("pageLoadEvents",{detail:n})),delete window.drupalSettings.nppe_ttt_datalayer.after_zone_loaded[e]};window.__importsReady?a():document.addEventListener("importsReady",a,{once:!0})}))})).observe(document.documentElement,{childList:!0,subtree:!0});const d=window.drupalSettings?.nppe_ttt_datalayer?.init||[],r=window.drupalSettings?.nppe_ttt_datalayer?.events||[],i=[...Array.isArray(d)?d:Object.values(d),...Array.isArray(r)?r:Object.values(r)];i&&i.forEach((e=>{e.data&&e.data.event_name&&t(e)}));new MutationObserver((e=>{let t=!1;e.forEach((e=>{"childList"===e.type&&e.addedNodes.length>0&&e.addedNodes.forEach((e=>{if(e.nodeType===Node.ELEMENT_NODE){e.querySelector&&(e.querySelector("[data-product-id]")||e.querySelector("[data-history-node-id]")||e.hasAttribute("data-product-id")||e.hasAttribute("data-history-node-id"))&&(t=!0)}}))})),t&&(clearTimeout(window.datalayerRebindTimeout),window.datalayerRebindTimeout=setTimeout((()=>{n()}),100))})).observe(document.body,{childList:!0,subtree:!0}),document.querySelector("div.qualifio_iframe_wrapper")&&document.dispatchEvent(new CustomEvent("qualifioEvents"));window.document})();